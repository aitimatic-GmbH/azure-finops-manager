# .github/workflows/2-lint-workflows.yml

name: 'Reuseable: Lint Workflow Files'

# ====================================================================
# TRIGGER:
# 1. Kann von einem anderen Workflow aufgerufen werden (für die CI-Pipeline).
# 2. Kann manuell gestartet werden (für isolierte Tests).
# ====================================================================
on:
  workflow_call:
  workflow_dispatch:

# ====================================================================
# JOB: Der eigentliche Linting-Prozess
# ====================================================================
jobs:
  lint-workflows:
    name: 'Validate Workflow Syntax with actionlint'
    runs-on: ubuntu-latest

    steps:
      # Schritt 1: Code auschecken, damit der Linter die Dateien findet
      - name: 'Checkout repository'
        uses: actions/checkout@v6

      # Schritt 2: actionlint herunterladen und installieren
      # Wir verwenden hier den offiziellen "setup-actionlint" Workflow für Einfachheit.
      # Alternativ könnte man den Einzeiler von vorhin nutzen.
      - name: 'Install actionlint'
        id: get_actionlint
        run: bash <(curl https://raw.githubusercontent.com/rhysd/actionlint/main/scripts/download-actionlint.bash)
        shell: bash

      # Schritt 3: actionlint ausführen
      # Dieser Schritt schlägt fehl, wenn actionlint Fehler findet, und blockiert so den PR.
      - name: 'Check workflow files'
        run: ${{ steps.get_actionlint.outputs.executable }} -color
        shell: bash

